---
interface producto {
  Id: string;
  Nombre: string;
  Secciones: string;
  Categoria: string;
  Color: string;
  Tama침o: string;
  Precio: string;
  Stock: string;
  Imagenes: string;
}

import Filtros from "./Filtros.astro";
import Fondo from "./Fondo.astro";

const sheetdbApiUrl = import.meta.env.PUBLIC_SHEETDB_API;
const response = await fetch(sheetdbApiUrl);
const productos: producto[] = await response.json();
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cat치logo</title>
  </head>
  <body>
    <Fondo />
    <main class="w-450 mx-auto px-4 sm:px-6 lg:px-8">
      <div
        class="flex flex-wrap md:flex-nowrap items-start justify-between pt-10 gap-4 mb-8"
      >
        <!-- Filtros -->
        <div class="w-full md:w-1/4">
          <Filtros />
        </div>

        <!-- Productos con barra de b칰squeda -->
        <div class="w-full md:w-3/4">
          <!-- Barra de b칰squeda -->
          <div class="mb-4">
            <input
              type="text"
              placeholder="Buscar producto..."
              x-model="search"
              class="w-full border border-primario text-primario px-4 backdrop-blur-[15px] py-2 rounded shadow focus:outline-none"
            />
          </div>

          <!-- Grid de productos filtrados -->
          <div
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 mt-10"
          >
            {
              productos.map((producto) => (
                <div
                  class="producto cursor-pointer hover:scale-101 border-primario hover:shadow-2xl shadow-xl transition backdrop-blur-[10px] border rounded-lg shadow p-4 text-center"
                  data-nombre={producto.Nombre}
                  data-categoria={
                    Array.isArray(producto.Categoria)
                      ? producto.Categoria.join(",")
                      : producto.Categoria
                  }
                  data-color={
                    Array.isArray(producto.Color)
                      ? producto.Color.join(",")
                      : producto.Color
                  }
                  data-tama침o={
                    Array.isArray(producto.Tama침o)
                      ? producto.Tama침o.join(",")
                      : producto.Tama침o
                  }
                >
                  <img
                    src={producto.Imagenes}
                    alt={producto.Nombre}
                    class="w-full h-90 object-cover mb-4 rounded-xl mask-y-from-98% mask-y-to-100% mask-x-from-98% mask-x-to-100%"
                  />
                  <h2 class="text-2xl font-semibold text-primario">
                    {producto.Nombre}
                  </h2>
                  <p class="text-xl text-gray-500 text-secundario">
                    {producto.Precio}
                  </p>
                </div>
              ))
            }
          </div>
          <!-- 游댠 Paginaci칩n -->
          <div class="flex justify-center items-center mt-8 gap-4">
            <button
              id="prev-page"
              class="px-4 py-2 text-primario bg-secundario rounded hover:bg-terciario transition"
            >
              Anterior
            </button>
            <span id="page-info" class="text-primario font-semibold text-lg">
              P치gina 1
            </span>
            <button
              id="next-page"
              class="px-4 py-2 text-primario bg-secundario rounded hover:bg-terciario transition"
            >
              Siguiente
            </button>
          </div>
        </div>
      </div>
    </main>
  </body>
  <script src="/src/js/filtros.js"></script>
  <script src="/src/js/paginacion.js" type="module"></script>
</html>
